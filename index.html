# /index.html
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
  <meta name="theme-color" content="#2b99ca"/>
  <title>DAWGCHECK Trainer</title>
  <link rel="manifest" href="manifest.json"/>
  <link rel="icon" href="assets/icons/icon-192.png"/>
  <link rel="apple-touch-icon" href="assets/icons/icon-512.png"/>
  <link rel="stylesheet" href="styles.css?v=9"/>
</head>
<body>
  <!-- Orientation guard -->
  <div id="orientation-guard" class="og" hidden>
    <div class="og-card"><h2>Rotate device</h2><p>This trainer is landscape only.</p></div>
  </div>

  <!-- Header -->
  <header class="topbar">
    <div class="brand">
      <img src="assets/icons/icon-192.png" class="brand__logo" alt="DAWGCHECK logo">
      <div class="brand__text"><strong>DAWGCHECK</strong><span>Trainer</span></div>
    </div>
    <nav class="topnav">
      <a href="#/cases" class="link">My Cases</a>
      <button class="link" id="assist">Need Assistance?</button>
      <div class="welcome"><span>Welcome</span><button class="link" id="btn-logout">Logout</button></div>
    </nav>
  </header>

  <!-- Action strip -->
  <section class="actions">
    <span class="btn btn--ghost">Case Notes</span>
    <span class="btn btn--ghost">View Forms</span>
    <span class="btn btn--ghost">Case Actions ▾</span>
    <span id="save-status" class="save-status">Ready</span>
  </section>

  <!-- Tabs -->
  <nav class="tabs" role="tablist" aria-label="Sections">
    <button class="tab" data-tab="case">Case Information</button>
    <button class="tab" data-tab="app">Application</button>
  </nav>

  <!-- App layout: left step nav + right content -->
  <div class="app-layout">
    <aside id="step-nav" aria-label="Application steps" hidden>
      <ol id="step-list"></ol>
    </aside>

    <!-- Router -->
    <main id="router" tabindex="-1">
      <!-- LOGIN -->
      <section class="view view--active" data-view="login">
        <header class="section-hd"><h2>Sign In</h2></header>
        <div class="form-grid">
          <div class="field"><label>First Name</label><input id="login-first" class="input" autocomplete="given-name"/></div>
          <div class="field"><label>Last Name</label><input id="login-last" class="input" autocomplete="family-name"/></div>
        </div>
        <div class="footer-nav"><button id="btn-login" class="btn btn--primary">Sign In</button></div>
      </section>

      <!-- HOME -->
      <section class="view" data-view="home" hidden>
        <div class="hero">
          <div class="hero__bg"></div>
          <div class="hero__tiles">
            <a class="tile" href="#/start">Start New Case</a>
            <a class="tile" href="#/cases">View My Cases</a>
          </div>
        </div>
      </section>

      <!-- START NEW CASE -->
      <section class="view" data-view="start" hidden>
        <header class="section-hd"><h2>Start New Case</h2><div class="pill pill--tab">Case Information</div></header>
        <div class="form-grid">
          <fieldset class="fs"><legend>Proposed Insured</legend>
            <div class="field"><label>First Name <b class="req">*</b></label><input id="firstName" class="input required" autocomplete="given-name"/></div>
            <div class="field"><label>Last Name <b class="req">*</b></label><input id="lastName" class="input required" autocomplete="family-name"/></div>
            <div class="field"><label>Date of Birth <b class="req">*</b></label><input id="dob" class="input dob" placeholder="MM/DD/YYYY" inputmode="numeric" autocomplete="bday"/></div>
            <div class="field"><label>Age</label><input id="age" class="input age" readonly/></div>
            <div class="field"><label>Gender <b class="req">*</b></label>
              <select id="gender" class="select required"><option value="">Please select…</option><option>Male</option><option>Female</option></select>
            </div>
          </fieldset>
          <fieldset class="fs"><legend>Case Details</legend>
            <div class="field"><label>Description</label><input id="desc" class="input" placeholder="(Examples: $500,000, Kid’s Policy, etc.)"/></div>
            <div class="field"><label>Coverage Amount <b class="req">*</b></label><input id="coverage" class="input money required" inputmode="decimal" placeholder="$250,000"/></div>
          </fieldset>
          <fieldset class="fs"><legend>Carrier and Product</legend>
            <div class="field"><label>State <b class="req">*</b></label>
              <select id="state" class="select required">
                <option value="">Please select…</option>
                <option>Alabama</option><option>Alaska</option><option>Arizona</option><option>Arkansas</option>
                <option>California</option><option>Colorado</option><option>Connecticut</option><option>Delaware</option>
                <option>Florida</option><option>Georgia</option><option>Hawaii</option><option>Idaho</option>
                <option>Illinois</option><option>Indiana</option><option>Iowa</option><option>Kansas</option>
                <option>Kentucky</option><option>Louisiana</option><option>Maine</option><option>Maryland</option>
                <option>Massachusetts</option><option>Michigan</option><option>Minnesota</option><option>Mississippi</option>
                <option>Missouri</option><option>Montana</option><option>Nebraska</option><option>Nevada</option>
                <option>New Hampshire</option><option>New Jersey</option><option>New Mexico</option><option>New York</option>
                <option>North Carolina</option><option>North Dakota</option><option>Ohio</option><option>Oklahoma</option>
                <option>Oregon</option><option>Pennsylvania</option><option>Rhode Island</option><option>South Carolina</option>
                <option>South Dakota</option><option>Tennessee</option><option>Texas</option><option>Utah</option>
                <option>Vermont</option><option>Virginia</option><option>Washington</option><option>West Virginia</option>
                <option>Wisconsin</option><option>Wyoming</option>
              </select>
            </div>
            <div class="field"><label>Product Type <b class="req">*</b></label>
              <select id="ptype" class="select required">
                <option value="">Please select…</option><option>Term Life</option><option>Final Expense</option><option>IUL</option>
              </select>
            </div>
          </fieldset>
        </div>
        <div class="footer-nav">
          <a class="btn btn--ghost" href="#/home">Back</a>
          <a class="btn btn--primary" href="#/app-1">Next ▸</a>
        </div>
      </section>

      <!-- ===== 20 APPLICATION STEPS ===== -->
      <!-- 1 -->
      <section class="view" data-view="app-1" hidden>
        <header class="section-hd"><h2>Producer Information</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>Producer Name</label><input id="prod-name" class="input" readonly placeholder="From login"/></div>
          <div class="field"><label>NPN</label><input id="npn" class="input" inputmode="numeric"/></div>
          <div class="field"><label>Email</label><input id="producer-email" class="input" inputmode="email"/></div>
          <div class="field"><label>Phone</label><input id="producer-phone" class="input phone"/></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/start">Back</a><a class="btn btn--primary" href="#/app-2">Next ▸</a></div>
      </section>
      <!-- 2 -->
      <section class="view" data-view="app-2" hidden>
        <header class="section-hd"><h2>Proposed Insured</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>First <b class="req">*</b></label><input id="pi-first" class="input required"/></div>
          <div class="field"><label>Middle</label><input id="pi-mi" class="input"/></div>
          <div class="field"><label>Last <b class="req">*</b></label><input id="pi-last" class="input required"/></div>
          <div class="field"><label>Date of Birth <b class="req">*</b></label><input id="pi-dob" class="input dob" placeholder="MM/DD/YYYY"/></div>
          <div class="field"><label>Age</label><input id="pi-age" class="input age" readonly/></div>
          <div class="field"><label>Gender <b class="req">*</b></label><select id="pi-gender" class="select required"><option value="">Select…</option><option>Male</option><option>Female</option></select></div>
          <div class="field"><label>SSN <b class="req">*</b></label><input id="pi-ssn" class="input ssn" placeholder="___-__-____"/></div>
          <div class="field"><label>Height</label><div class="inline">
            <select id="h-ft" class="select"><option>4'</option><option selected>5'</option><option>6'</option><option>7'</option></select>
            <select id="h-in" class="select"><option>0"</option><option>2"</option><option>4"</option><option>6"</option><option>8"</option><option>10"</option><option>11"</option></select>
          </div></div>
          <div class="field"><label>Weight (lb)</label><input id="pi-weight" class="input" inputmode="numeric"/></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-1">Back</a><a class="btn btn--primary" href="#/app-3">Next ▸</a></div>
      </section>
      <!-- 3 -->
      <section class="view" data-view="app-3" hidden>
        <header class="section-hd"><h2>Confirm Identity – Proposed Insured</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>ID Type</label><select id="id-type" class="select"><option>Driver’s License</option><option>Passport</option><option>State ID</option></select></div>
          <div class="field"><label>ID Number</label><input id="id-number" class="input"/></div>
          <div class="field"><label>State Issued</label><select id="id-state" class="select"><option>AL</option><option>AK</option><option>AZ</option><option>AR</option><option>CA</option><option>CO</option><option>CT</option><option>DE</option><option>FL</option><option>GA</option><option>HI</option><option>ID</option><option>IL</option><option>IN</option><option>IA</option><option>KS</option><option>KY</option><option>LA</option><option>ME</option><option>MD</option><option>MA</option><option>MI</option><option>MN</option><option>MS</option><option>MO</option><option>MT</option><option>NE</option><option>NV</option><option>NH</option><option>NJ</option><option>NM</option><option>NY</option><option>NC</option><option>ND</option><option>OH</option><option>OK</option><option>OR</option><option>PA</option><option>RI</option><option>SC</option><option>SD</option><option>TN</option><option>TX</option><option>UT</option><option>VT</option><option>VA</option><option>WA</option><option>WV</option><option>WI</option><option>WY</option></select></div>
          <div class="field"><label>Expiration</label><input id="id-exp" class="input" placeholder="MM/DD/YYYY"/></div>
          <div class="field"><label>Identity Confirmed</label><div class="seg"><input id="idconf-yes" type="radio" name="idconf" checked><label for="idconf-yes" class="seg__btn">Yes</label><input id="idconf-no" type="radio" name="idconf"><label for="idconf-no" class="seg__btn">No</label></div></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-2">Back</a><a class="btn btn--primary" href="#/app-4">Next ▸</a></div>
      </section>
      <!-- 4 -->
      <section class="view" data-view="app-4" hidden>
        <header class="section-hd"><h2>HIPAA Signature and Lock Data</h2><div class="pill pill--tab">Application</div></header>
        <div class="fs span-3">
          <p><strong>HIPAA Authorization:</strong> I authorize the release of my protected health information to the insurance company and its reinsurers for the purpose of underwriting and claims management. This authorization remains valid for 24 months and may be revoked by me in writing.</p>
          <label class="inline"><input id="hipaa-ack" type="checkbox"/> I have read and agree to the HIPAA Authorization.</label>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-3">Back</a><a class="btn btn--primary" href="#/app-5">Next ▸</a></div>
      </section>
      <!-- 5 -->
      <section class="view" data-view="app-5" hidden>
        <header class="section-hd"><h2>HIPAA Signature Method</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field span-3">
            <label>Select Method</label>
            <div class="seg seg--full">
              <input id="hipaa-esign" type="radio" name="hipaa-method" checked><label class="seg__btn" for="hipaa-esign">Electronic Signature</label>
              <input id="hipaa-inperson" type="radio" name="hipaa-method"><label class="seg__btn" for="hipaa-inperson">In‑Person</label>
              <input id="hipaa-mail" type="radio" name="hipaa-method"><label class="seg__btn" for="hipaa-mail">Mail</label>
            </div>
          </div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-4">Back</a><a class="btn btn--primary" href="#/app-6">Next ▸</a></div>
      </section>
      <!-- 6 -->
      <section class="view" data-view="app-6" hidden>
        <header class="section-hd"><h2>Proposed Insured Cont’d</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>Address</label><input id="addr" class="input" autocomplete="address-line1"/></div>
          <div class="field"><label>City</label><input id="city" class="input" autocomplete="address-level2"/></div>
          <div class="field"><label>State</label><select id="addr-state" class="select"><option>AL</option> <option>AK</option> <option>AZ</option> <option>AR</option> <option>CA</option> <option>CO</option> <option>CT</option> <option>DE</option> <option>FL</option> <option>GA</option> <option>HI</option> <option>ID</option> <option>IL</option> <option>IN</option> <option>IA</option> <option>KS</option> <option>KY</option> <option>LA</option> <option>ME</option> <option>MD</option> <option>MA</option> <option>MI</option> <option>MN</option> <option>MS</option> <option>MO</option> <option>MT</option> <option>NE</option> <option>NV</option> <option>NH</option> <option>NJ</option> <option>NM</option> <option>NY</option> <option>NC</option> <option>ND</option> <option>OH</option> <option>OK</option> <option>OR</option> <option>PA</option> <option>RI</option> <option>SC</option> <option>SD</option> <option>TN</option> <option>TX</option> <option>UT</option> <option>VT</option> <option>VA</option> <option>WA</option> <option>WV</option> <option>WI</option> <option>WY</option></select></div>
          <div class="field"><label>ZIP</label><input id="zip" class="input zip" inputmode="numeric" maxlength="5"/></div>
          <div class="field"><label>Phone</label><input id="pi-phone" class="input phone"/></div>
          <div class="field"><label>Email</label><input id="pi-email" class="input" inputmode="email"/></div>
          <div class="field"><label>Marital Status</label><select id="marital" class="select"><option>Single</option><option>Married</option><option>Divorced</option><option>Widowed</option></select></div>
          <div class="field"><label>Employer</label><input id="employer" class="input"/></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-5">Back</a><a class="btn btn--primary" href="#/app-7">Next ▸</a></div>
      </section>
      <!-- 7 -->
      <section class="view" data-view="app-7" hidden>
        <header class="section-hd"><h2>Insurance History</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>Existing Policies?</label><div class="seg"><input id="exist-yes" type="radio" name="exist" checked><label for="exist-yes" class="seg__btn">Yes</label><input id="exist-no" type="radio" name="exist"><label for="exist-no" class="seg__btn">No</label></div></div>
          <div class="field span-3"><label>Replacement Involved?</label><div class="seg seg--full"><input id="repl-yes" type="radio" name="repl"><label for="repl-yes" class="seg__btn">Yes</label><input id="repl-no" type="radio" name="repl" checked><label for="repl-no" class="seg__btn">No</label></div></div>
          <div class="field"><label>Tobacco Use (last 12 mos)</label><select id="tobacco" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>DUI in last 5 yrs</label><select id="dui" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Felony history</label><select id="felony" class="select"><option>No</option><option>Yes</option></select></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-6">Back</a><a class="btn btn--primary" href="#/app-8">Next ▸</a></div>
      </section>
      <!-- 8 -->
      <section class="view" data-view="app-8" hidden>
        <header class="section-hd"><h2>Plan Information</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>Product Type</label><select id="plan-type" class="select"><option>Term Life</option><option>Whole Life</option><option>Final Expense</option><option>IUL</option></select></div>
          <div class="field"><label>Coverage Amount</label><input id="plan-coverage" class="input money" placeholder="$250,000"/></div>
          <div class="field"><label>Term Length</label><select id="term" class="select"><option>10</option><option>15</option><option>20</option><option>30</option></select></div>
          <div class="field"><label>Premium Mode</label><select id="mode" class="select"><option>Monthly</option><option>Quarterly</option><option>Semi-Annual</option><option>Annual</option></select></div>
          <div class="field"><label>Rider: Accidental Death</label><select id="rider-adb" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Rider: Waiver of Premium</label><select id="rider-waiver" class="select"><option>No</option><option>Yes</option></select></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-7">Back</a><a class="btn btn--primary" href="#/app-9">Next ▸</a></div>
      </section>
      <!-- 9 -->
      <section class="view" data-view="app-9" hidden>
        <header class="section-hd"><h2>Pre-Approval Information</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>Currently hospitalized?</label><select id="pre-hosp" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Terminal illness diagnosed?</label><select id="pre-term" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Recent surgery (last 12 mo)?</label><select id="pre-surg" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field span-3"><label>Details</label><textarea id="pre-notes" class="input" rows="3" placeholder="Explain any Yes answers"></textarea></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-8">Back</a><a class="btn btn--primary" href="#/app-10">Next ▸</a></div>
      </section>
      <!-- 10 -->
      <section class="view" data-view="app-10" hidden>
        <header class="section-hd"><h2>Underwriting</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>Heart disease</label><select id="uw-heart" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Stroke</label><select id="uw-stroke" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Cancer</label><select id="uw-cancer" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Diabetes</label><select id="uw-diabetes" class="select"><option>No</option><option>Type 1</option><option>Type 2</option></select></div>
          <div class="field"><label>COPD/Asthma</label><select id="uw-copd" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Kidney disease</label><select id="uw-kidney" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>HIV/AIDS</label><select id="uw-hiv" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Mental health treatment</label><select id="uw-mental" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field"><label>Hospitalized (5 yrs)</label><select id="uw-hosp" class="select"><option>No</option><option>Yes</option></select></div>
          <div class="field span-3"><label>Medications List</label><textarea id="uw-meds" class="input" rows="3" placeholder="Name – Dose – Frequency"></textarea></div>
          <div class="field span-3"><label>Additional Details</label><textarea id="uw-notes" class="input" rows="3"></textarea></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-9">Back</a><a class="btn btn--primary" href="#/app-11">Next ▸</a></div>
      </section>
      <!-- 11 -->
      <section class="view" data-view="app-11" hidden>
        <header class="section-hd"><h2>Beneficiaries</h2><div class="pill pill--tab">Application</div></header>
        <div class="fs span-3">
          <table class="table" id="bene-table">
            <thead><tr><th>Name</th><th>Relationship</th><th>Type</th><th>%</th><th>Action</th></tr></thead>
            <tbody id="bene-body"></tbody>
            <tfoot><tr><td colspan="5"><button id="bene-add" class="btn btn--ghost" type="button">Add Beneficiary</button> <span id="bene-total" style="margin-left:.8rem">Total: 0%</span></td></tr></tfoot>
          </table>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-10">Back</a><a class="btn btn--primary" href="#/app-12">Next ▸</a></div>
      </section>
      <!-- 12 -->
      <section class="view" data-view="app-12" hidden>
        <header class="section-hd"><h2>Premium Summary</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>Quoted Premium (Monthly)</label><input id="prem-mo" class="input money" placeholder="$0.00"/></div>
          <div class="field"><label>Mode</label><select id="prem-mode" class="select"><option>Monthly</option><option>Quarterly</option><option>Semi-Annual</option><option>Annual</option></select></div>
          <div class="field"><label>Draft on Approval</label><select id="prem-draft" class="select"><option>No</option><option>Yes</option></select></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-11">Back</a><a class="btn btn--primary" href="#/app-13">Next ▸</a></div>
      </section>
      <!-- 13 -->
      <section class="view" data-view="app-13" hidden>
        <header class="section-hd"><h2>Automatic Bill Pay</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <fieldset class="fs span-3"><legend>Bank</legend>
            <div class="field"><label>Name of Financial Institution</label><input id="bank-name" class="input"/></div>
            <div class="field"><label>Routing Number</label><input id="routing" class="input routing" inputmode="numeric" maxlength="9"/></div>
            <div class="field"><label>Account Number</label><input id="account" class="input account" inputmode="numeric" maxlength="17"/></div>
          </fieldset>
          <fieldset class="fs span-3"><legend>Ongoing Automatic Monthly Premium Payments</legend>
            <div class="field span-3">
              <div class="seg seg--full">
                <input id="pay-any" type="radio" name="payday" checked><label class="seg__btn" for="pay-any">Choose day each month</label>
                <input id="pay-sched" type="radio" name="payday"><label class="seg__btn" for="pay-sched">Choose week & weekday</label>
              </div>
            </div>
            <div class="field"><label>Weekday</label><select id="weekday" class="select"><option>Friday</option><option>Wednesday</option><option>Monday</option></select></div>
            <div class="field"><label>Week</label><select id="week" class="select"><option>1</option><option>2</option><option>3</option><option>4</option></select></div>
            <div class="field"><label>Amount Quoted</label><input id="amount" class="input money" placeholder="$0.00" inputmode="decimal"/></div>
          </fieldset>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-12">Back</a><a class="btn btn--primary" href="#/app-14">Next ▸</a></div>
      </section>
      <!-- 14 -->
      <section class="view" data-view="app-14" hidden>
        <header class="section-hd"><h2>Validate and Lock Data</h2><div class="pill pill--tab">Application</div></header>
        <div class="fs span-3">
          <p>Resolve all items below before locking:</p>
          <ul id="val-errors"></ul>
          <button id="btn-validate" class="btn btn--primary" type="button">Run Validation</button>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-13">Back</a><a class="btn btn--primary" href="#/app-15">Next ▸</a></div>
      </section>
      <!-- 15 -->
      <section class="view" data-view="app-15" hidden>
        <header class="section-hd"><h2>Attachments</h2><div class="pill pill--tab">Application</div></header>
        <div class="fs span-3">
          <div class="field"><label>Attach ID (front/back)</label><input id="att-id" type="file" multiple/></div>
          <div class="field"><label>Attach Medical Docs</label><input id="att-med" type="file" multiple/></div>
          <div class="field"><label>Attach Other</label><input id="att-oth" type="file" multiple/></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-14">Back</a><a class="btn btn--primary" href="#/app-16">Next ▸</a></div>
      </section>
      <!-- 16 -->
      <section class="view" data-view="app-16" hidden>
        <header class="section-hd"><h2>Post Submission Email Setup</h2><div class="pill pill--tab">Application</div></header>
        <div class="fs span-3">
          <div class="inline"><input id="email-add" class="input" placeholder="email@example.com" inputmode="email"/><button id="email-add-btn" class="btn btn--ghost" type="button">Add</button></div>
          <ul id="email-list" style="margin:.6rem 0 0 .2rem"></ul>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-15">Back</a><a class="btn btn--primary" href="#/app-17">Next ▸</a></div>
      </section>
      <!-- 17 -->
      <section class="view" data-view="app-17" hidden>
        <header class="section-hd"><h2>Signature Method</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field span-3"><label>Choose Method</label>
            <div class="seg seg--full">
              <input id="sig-esign" type="radio" name="sig-method" checked><label class="seg__btn" for="sig-esign">Electronic Signature</label>
              <input id="sig-inperson" type="radio" name="sig-method"><label class="seg__btn" for="sig-inperson">In‑Person</label>
              <input id="sig-mail" type="radio" name="sig-method"><label class="seg__btn" for="sig-mail">Mail</label>
            </div>
          </div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-16">Back</a><a class="btn btn--primary" href="#/app-18">Next ▸</a></div>
      </section>
      <!-- 18 -->
      <section class="view" data-view="app-18" hidden>
        <header class="section-hd"><h2>Producer Statement</h2><div class="pill pill--tab">Application</div></header>
        <div class="fs span-3">
          <label class="inline"><input id="ps-1" type="checkbox"/> I personally met with the proposed insured.</label>
          <label class="inline"><input id="ps-2" type="checkbox"/> I have no knowledge of undisclosed risk factors.</label>
          <label class="inline"><input id="ps-3" type="checkbox"/> Replacement procedures, if applicable, were followed.</label>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-17">Back</a><a class="btn btn--primary" href="#/app-19">Next ▸</a></div>
      </section>
      <!-- 19 -->
      <section class="view" data-view="app-19" hidden>
        <header class="section-hd"><h2>Welcome Consent – Producer</h2><div class="pill pill--tab">Application</div></header>
        <div class="fs span-3">
          <p>By proceeding, you consent to receive documents electronically and agree that an electronic signature has the same legal effect as a handwritten signature.</p>
          <label class="inline"><input id="consent" type="checkbox"/> I agree and consent.</label>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-18">Back</a><a class="btn btn--primary" href="#/app-20">Next ▸</a></div>
      </section>
      <!-- 20 -->
      <section class="view" data-view="app-20" hidden>
        <header class="section-hd"><h2>Apply eSignature – Producer</h2><div class="pill pill--tab">Application</div></header>
        <div class="form-grid">
          <div class="field"><label>Signature (type full name)</label><input id="prod-signature" class="input" placeholder="First Last"/></div>
          <div class="field"><label>Date</label><input id="sig-date" class="input" placeholder="MM/DD/YYYY"/></div>
          <div class="field"><label>Agree</label><div class="seg"><input id="agree-yes" type="radio" name="agree" checked><label class="seg__btn" for="agree-yes">Yes</label><input id="agree-no" type="radio" name="agree"><label class="seg__btn" for="agree-no">No</label></div></div>
        </div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/app-19">Back</a><a class="btn btn--primary" href="#/app-success">Submit</a></div>
      </section>

      <!-- SUCCESS -->
      <section class="view" data-view="app-success" hidden>
        <div class="callout callout--success">Thank you for submitting your Electronic Application! This policy has been approved.</div>
        <div class="footer-nav"><a class="btn btn--ghost" href="#/home">Back</a><a class="btn btn--primary" href="#/home">Finish</a></div>
      </section>

      <!-- CASES -->
      <section class="view" data-view="cases" hidden>
        <header class="section-hd"><h2>My Cases</h2></header>
        <table class="table">
          <thead><tr><th>Case</th><th>Status</th><th>Modified</th><th>Action</th></tr></thead>
          <tbody>
            <tr><td>BUS523159</td><td>Approved</td><td>08/18</td><td><a class="btn btn--ghost" href="#/app-success">Open</a></td></tr>
            <tr><td>QTE992341</td><td>In Progress</td><td>08/17</td><td><a class="btn btn--ghost" href="#/start">Resume</a></td></tr>
          </tbody>
        </table>
      </section>
    </main>
  </div>

  <footer class="footer">© <span id="year"></span> DAWGCHECK Trainer</footer>
  <script src="app.js?v=9" type="module" defer></script>
</body>
</html>

# /styles.css
:root{
  --blue-600:#2b99ca; --blue-700:#2883b5; --blue-800:#0e5f8f;
  --hero:#8fadc9; --bg:#f3f5f7; --panel:#fff; --ink:#2a3d52;
  --line:#d9e1ea; --req:#fff7b2; --warn:#ffd79c; --succ:#d4f7d0;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial}
:focus-visible{outline:2px solid #ffd166;outline-offset:2px}

/* Orientation guard */
.og{position:fixed;inset:0;display:none;place-items:center;background:#0008;z-index:9999}
.og-card{background:#fff;color:#111;padding:1rem 1.2rem;border-radius:.6rem;min-width:280px;text-align:center}
@media (orientation:portrait){ .og{display:grid} }

/* Topbar */
.topbar{display:flex;align-items:center;justify-content:space-between;padding:.4rem .8rem;
  background:linear-gradient(0deg,var(--blue-700),var(--blue-600));color:#fff;border-bottom:3px solid var(--blue-800);position:sticky;top:0;z-index:20}
.brand{display:flex;align-items:center;gap:.6rem}
.brand__logo{width:34px;height:34px;border-radius:6px}
.brand__text{display:flex;flex-direction:column;line-height:1}
.brand__text span{font-size:.8rem;opacity:.9}
.topnav{display:flex;align-items:center;gap:1rem}
.link{background:transparent;border:none;color:#fff;font-weight:600;cursor:pointer}
.link:hover{text-decoration:underline}

/* Action strip */
.actions{display:flex;gap:.5rem;align-items:center;padding:.5rem .8rem;background:#f7fbff;border-bottom:1px solid var(--line)}
.btn{border:1px solid transparent;border-radius:.35rem;padding:.45rem .8rem;font-weight:600}
.btn--primary{background:var(--blue-600);color:#fff;border-color:var(--blue-700)}
.btn--ghost{background:#fff;border-color:#cfd8e3}
.save-status{margin-left:auto;font-size:.85rem;color:#2b4258}

/* Tabs */
.tabs{display:flex;background:#fff;border-bottom:2px solid var(--blue-800)}
.tab{padding:.7rem 1rem;font-weight:700;border:none;cursor:default}
.tab:nth-child(1){background:#fff;border-bottom:3px solid var(--blue-800)}
.tab:nth-child(2){background:#cfe6f4}

/* Layout */
.app-layout{display:grid;grid-template-columns:260px 1fr;gap:1rem;max-width:1600px;margin:0 auto}
#step-nav{position:sticky;top:64px;align-self:start}
#step-nav[hidden]{display:none}
#step-list{list-style:none;padding:.8rem;margin:0;background:#fff;border:1px solid var(--line);border-radius:.5rem}
#step-list li{display:flex;align-items:center;gap:.5rem;padding:.45rem .5rem;border-radius:.35rem;cursor:pointer}
#step-list li:hover{background:#f2f7fb}
#step-list li.is-active{background:#e7f2fa;border-left:3px solid var(--blue-700)}
.step-dot{width:22px;height:22px;border-radius:50%;border:2px solid var(--blue-700);display:grid;place-items:center;font-size:.8rem;color:var(--blue-700);flex:0 0 auto}
.is-done .step-dot{background:var(--blue-700);color:#fff}

/* Views & forms */
.view{padding:1rem}
.view[hidden]{display:none}
.section-hd{display:flex;align-items:center;gap:1rem;margin:.5rem 0 1rem}
.pill{display:inline-block;border:1px solid var(--blue-800);border-radius:.4rem;padding:.35rem .6rem;font-weight:700}
.pill--tab{background:var(--blue-800);color:#fff}

.form-grid{display:grid;gap:1rem;grid-template-columns:repeat(3,minmax(300px,1fr))}
@media (max-width:1200px){.app-layout{grid-template-columns:1fr}.form-grid{grid-template-columns:repeat(2,minmax(300px,1fr))}#step-nav{display:none}}
@media (max-width:900px){.form-grid{grid-template-columns:repeat(1,minmax(280px,1fr))}}
.fs{background:var(--panel);border:1px solid var(--line);border-radius:.4rem;padding:.8rem}
.field{display:flex;flex-direction:column;gap:.35rem}
.span-2{grid-column:span 2}.span-3{grid-column:span 3}
.input,.select,textarea{width:100%;padding:.55rem .6rem;border:1px solid #cfd8e3;border-radius:.3rem;background:#f6f8fb}
.inline{display:flex;gap:.5rem;align-items:center}

/* Table */
.table{width:100%;border-collapse:collapse;background:#fff;border:1px solid var(--line)}
.table th,.table td{padding:.6rem;border-bottom:1px solid var(--line);text-align:left}

/* Segmented control */
.seg{display:inline-grid;grid-auto-flow:column;gap:0;border-radius:.35rem;overflow:hidden;border:1px solid #cfd8e3}
.seg--full{width:100%}
.seg input{display:none}
.seg__btn{padding:.45rem .7rem;border-right:1px solid #cfd8e3;background:#fff;cursor:pointer}
.seg__btn:last-child{border-right:none}
.seg input:checked + .seg__btn{background:#e7f2fa;font-weight:700}

/* Callouts & misc */
.callout{border:1px solid #e3b04b;background:var(--warn);color:#6a4a00;border-radius:.35rem;padding:.7rem .8rem;margin:1rem 0}
.callout--success{background:var(--succ);border-color:#7ad27a;color:#0b5d11}
.footer-nav{display:flex;justify-content:space-between;gap:1rem;align-items:center;margin:1rem 0}
.footer{padding:1rem;text-align:center;color:#6b7b8d}

/* Hero */
.hero{position:relative;min-height:56vh;display:grid;place-items:center;border-radius:.6rem;background:var(--hero);margin:1rem}
.hero__bg{position:absolute;inset:.6rem;border-radius:.6rem;background:url('assets/city.jpg') center/cover;opacity:.78}
.hero__tiles{position:relative;display:flex;gap:2rem}
.tile{min-width:420px;min-height:120px;background:#fff;border:1px solid #cad6e2;border-radius:.6rem;box-shadow:0 2px 0 #c3d1de;display:grid;place-items:center;font-size:1.6rem;font-weight:700;color:#2a3d52;text-decoration:none}

/* Utilities */
.money{background:var(--req)}
.ssn{background:var(--req)}
.dob{background:var(--req)}
.age{background:#eef4f8}
.zip,.phone{background:#f6f8fb}
.error{border-color:#ef4444 !important;background:#fff1f1}
.req{color:#e22}
.vis{visibility:hidden}

# /app.js
const $ = (s, el=document) => el.querySelector(s);
const $$ = (s, el=document) => [...el.querySelectorAll(s)];
const stateKey = "dc-form";
const STEP_TITLES = [
  "Producer Information","Proposed Insured","Confirm Identity – Proposed Insured",
  "HIPAA Signature and Lock Data","HIPAA Signature Method","Proposed Insured Cont’d",
  "Insurance History","Plan Information","Pre-Approval Information","Underwriting",
  "Beneficiaries","Premium Summary","Automatic Bill Pay","Validate and Lock Data",
  "Attachments","Post Submission Email Setup","Signature Method","Producer Statement",
  "Welcome Consent – Producer","Apply eSignature – Producer"
];

/* Build step nav */
(function buildStepNav(){
  const list = $('#step-list'); if(!list) return;
  list.innerHTML = STEP_TITLES.map((t,i)=>`
    <li data-step="${i+1}" id="step-nav-${i+1}">
      <span class="step-dot">${i+1}</span><span>${t}</span>
    </li>
  `).join('');
  list.addEventListener('click', e=>{
    const li = e.target.closest('li[data-step]'); if(!li) return;
    const step = li.getAttribute('data-step');
    to(`app-${step}`);
  });
})();

/* Router */
function setAppChrome(isApp){
  const tabs = $$('.tabs .tab');
  if(tabs.length===2){
    tabs[0].style.background = isApp ? '#cfe6f4' : '#fff';
    tabs[0].style.borderBottom = isApp ? '0' : '3px solid var(--blue-800)';
    tabs[1].style.background = isApp ? '#fff' : '#cfe6f4';
    tabs[1].style.borderBottom = isApp ? '3px solid var(--blue-800)' : '0';
  }
  $('#step-nav').hidden = !isApp;
}
function markStep(view){
  const m = view.match(/^app-(\d{1,2})$/); if(!m) { $$('#step-list li').forEach(li=>li.classList.remove('is-active','is-done')); return; }
  const idx = +m[1];
  $$('#step-list li').forEach((li,i)=>{
    li.classList.toggle('is-active', i+1===idx);
    li.classList.toggle('is-done', i+1<idx);
    const dot = $('.step-dot', li);
    dot.textContent = (i+1<idx) ? '✓' : String(i+1);
  });
}
function to(view){
  const target = $(`[data-view="${view}"]`) ? view : "home";
  $$('.view').forEach(v=>{
    const active = v.dataset.view===target;
    v.hidden=!active; v.classList.toggle('view--active', active);
  });
  const isApp = /^app-/.test(target);
  setAppChrome(isApp);
  markStep(target);
  location.hash = `/${target}`;
  $('#router')?.focus();
}

/* Login */
$('#btn-login')?.addEventListener('click', ()=>{
  const fn = $('#login-first').value.trim();
  const ln = $('#login-last').value.trim();
  if(!fn||!ln){ alert('Enter first and last name'); return; }
  localStorage.setItem('dc-user', JSON.stringify({first:fn,last:ln}));
  $('.welcome span').textContent = `Welcome ${fn} ${ln}`;
  $('#prod-name')?.setAttribute('placeholder', `${fn} ${ln}`);
  to('home');
});
$('#btn-logout')?.addEventListener('click', ()=>{ localStorage.removeItem('dc-user'); to('login'); });
try{
  const u = JSON.parse(localStorage.getItem('dc-user')||'null');
  if(u){ $('.welcome span').textContent=`Welcome ${u.first} ${u.last}`; $('#prod-name')?.setAttribute('placeholder', `${u.first} ${u.last}`); to('home'); }
}catch{}

/* Orientation guard */
(function(){
  const guard = $('#orientation-guard');
  const update = () => { const portrait = matchMedia('(orientation:portrait)').matches; const narrow = innerWidth < 900; guard.hidden = !(portrait && narrow); };
  update(); addEventListener('resize', update); addEventListener('orientationchange', update);
})();

/* PWA */
if('serviceWorker' in navigator){ navigator.serviceWorker.register('./service-worker.js').catch(()=>{}); }

/* Masks + helpers */
const onlyDigits = (v,max) => (v.replace(/\D+/g,'').slice(0,max ?? 999));
const maskSSN = v => { const d=onlyDigits(v,9); const a=d.slice(0,3), b=d.slice(3,5), c=d.slice(5,9); return [a,b,c].filter(Boolean).join('-'); };
const isABA = v => { const d=onlyDigits(v,9); if(d.length!==9) return false; const n=[...d].map(Number); const sum=3*(n[0]+n[3]+n[6])+7*(n[1]+n[4]+n[7])+(n[2]+n[5]+n[8]); return sum%10===0; };
const maskCurrency = v => { const d = v.replace(/[^\d.]/g,''); const [i,f=''] = d.split('.'); const I = (i||'0').replace(/^0+(?=\d)/,'') || '0'; const F = (f+'00').slice(0,2); return `$${I}.${F}`; };
const maskPhone = v => { const d=onlyDigits(v,10); if(d.length<=3) return d; if(d.length<=6) return `(${d.slice(0,3)}) ${d.slice(3)}`; return `(${d.slice(0,3)}) ${d.slice(3,6)}-${d.slice(6,10)}`; };

/* DOB -> Age */
function calcAge(val){
  const m=val.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/); if(!m) return '';
  let [_,MM,DD,YYYY]=m; MM=+MM; DD=+DD; YYYY=+YYYY; if(YYYY<100) YYYY+=2000;
  const b=new Date(YYYY,MM-1,DD); if(isNaN(+b)) return '';
  const t=new Date(); let age=t.getFullYear()-b.getFullYear();
  const md=t.getMonth()-b.getMonth(); if(md<0||(md===0&&t.getDate()<b.getDate())) age--;
  return age>0?String(age):'';
}
function wireDOBtoAge(){
  $$('.dob').forEach(dob=>{
    const age = dob.closest('.form-grid,.fs,.view')?.querySelector('.age'); if(!age) return;
    dob.addEventListener('input', e=>{ age.value = calcAge(e.target.value.trim()); autosave(); });
  });
}
wireDOBtoAge();

/* Autosave */
let saveTimer;
function autosave(){
  clearTimeout(saveTimer);
  $('#save-status').textContent='Saving…';
  saveTimer=setTimeout(()=>{
    try{ localStorage.setItem(stateKey, JSON.stringify(collectForm())); $('#save-status').textContent='Saved'; }
    catch{ $('#save-status').textContent='Save failed'; }
  }, 300);
}
function collectForm(){
  const data = {};
  $$('input,select,textarea').forEach(el=>{
    if(!el.id) return;
    if(el.type==='file'){ data[el.id] = [...el.files].map(f=>f.name); }
    else if(el.type==='checkbox' || el.type==='radio'){ data[el.id] = el.checked; }
    else { data[el.id] = el.value; }
  });
  return data;
}
function restoreForm(){
  try{
    const d = JSON.parse(localStorage.getItem(stateKey)||'{}');
    Object.entries(d).forEach(([id,v])=>{
      const el = $('#'+id); if(!el) return;
      if(el.type==='checkbox'||el.type==='radio') el.checked = !!v;
      else if(el.type!=='file') el.value = v;
    });
    // recompute ages
    $$('.dob').forEach(dob=>{ const age = dob.closest('.form-grid,.fs,.view')?.querySelector('.age'); if(age) age.value = calcAge(dob.value||''); });
    updateBeneTotals(); renderEmailList();
  }catch{}
}
restoreForm();

/* Input wiring */
document.body.addEventListener('input', (e)=>{
  const t = e.target;
  if(!(t instanceof HTMLElement)) return;
  if(t.classList.contains('ssn')) t.value = maskSSN(t.value);
  if(t.classList.contains('money')) t.value = maskCurrency(t.value);
  if(t.classList.contains('routing')){ t.value = onlyDigits(t.value,9); t.classList.toggle('error', !!t.value && !isABA(t.value)); }
  if(t.classList.contains('account')){ t.value = onlyDigits(t.value,17); t.classList.toggle('error', !!t.value && (t.value.length<4 || t.value.length>17)); }
  if(t.classList.contains('phone')) t.value = maskPhone(t.value);
  if(t.classList.contains('zip')) t.value = onlyDigits(t.value,5);
  autosave();
});

/* Hash router */
window.addEventListener('hashchange', ()=>{ const target = location.hash.replace('#/','') || 'home'; to(target); });
if(!location.hash) to('login'); else to(location.hash.replace('#/',''));

/* Beneficiaries */
const beneBody = $('#bene-body');
function beneRow(id, name='', rel='', type='Primary', pct=''){
  return `<tr data-id="${id}">
    <td><input id="bene-name-${id}" class="input" value="${name}"/></td>
    <td><input id="bene-rel-${id}" class="input" value="${rel}"/></td>
    <td><select id="bene-type-${id}" class="select"><option ${type==='Primary'?'selected':''}>Primary</option><option ${type==='Contingent'?'selected':''}>Contingent</option></select></td>
    <td style="max-width:110px"><input id="bene-pct-${id}" class="input" inputmode="numeric" value="${pct}" /></td>
    <td><button class="btn btn--ghost bene-del" type="button">Remove</button></td>
  </tr>`;
}
function updateBeneTotals(){
  let total = 0;
  $$('[id^="bene-pct-"]').forEach(i=>{ const n = parseInt(onlyDigits(i.value,3)||'0',10); i.value = String(n); total += (isNaN(n)?0:n); });
  const el = $('#bene-total'); if(el){ el.textContent = `Total: ${total}%`; el.style.color = (total===100?'#0a7b12':'#b00020'); }
}
$('#bene-add')?.addEventListener('click', ()=>{
  const id = Math.random().toString(36).slice(2,8);
  beneBody.insertAdjacentHTML('beforeend', beneRow(id));
  autosave(); updateBeneTotals();
});
beneBody?.addEventListener('click', (e)=>{
  const btn = e.target.closest('.bene-del'); if(!btn) return;
  btn.closest('tr')?.remove(); autosave(); updateBeneTotals();
});
beneBody?.addEventListener('input', (e)=>{
  if(e.target.id.startsWith('bene-pct-')) updateBeneTotals();
});

/* Validation (step 14) */
const requiredIds = [
  'firstName','lastName','dob','gender','coverage','state','ptype',
  'pi-first','pi-last','pi-dob','pi-gender','pi-ssn'
];
$('#btn-validate')?.addEventListener('click', ()=>{
  const errs = [];
  requiredIds.forEach(id=>{
    const el = $('#'+id);
    if(!el) return;
    const val = (el.type==='checkbox'||el.type==='radio') ? el.checked : (el.value||'').trim();
    const bad = (el.type==='checkbox'||el.type==='radio') ? !val : val==='';
    el.classList.toggle('error', bad);
    if(bad) errs.push(`Missing: ${id}`);
  });
  if($('#routing') && $('#routing').value && !isABA($('#routing').value)) errs.push('Routing number invalid');
  if($('#bene-body') && $('#bene-body').children.length>0){
    const total = [...$$('[id^="bene-pct-"]')].reduce((a,i)=>a+(parseInt(i.value||'0',10)||0),0);
    if(total!==100) errs.push('Beneficiaries must total 100%');
  }
  const list = $('#val-errors');
  list.innerHTML = errs.length? errs.map(e=>`<li>${e}</li>`).join('') : '<li>All required items complete.</li>';
});

/* Email list (step 16) */
function renderEmailList(){
  const ul = $('#email-list'); if(!ul) return;
  const data = JSON.parse(localStorage.getItem(stateKey)||'{}');
  const emails = (data._emails||[]); ul.innerHTML='';
  emails.forEach((em,i)=>{
    const li = document.createElement('li'); li.textContent = em + ' ';
    const btn = document.createElement('button'); btn.className='btn btn--ghost'; btn.textContent='Remove';
    btn.addEventListener('click', ()=>{
      const d = JSON.parse(localStorage.getItem(stateKey)||'{}');
      (d._emails||[]).splice(i,1); localStorage.setItem(stateKey, JSON.stringify(d)); renderEmailList();
    });
    li.appendChild(btn); ul.appendChild(li);
  });
}
$('#email-add-btn')?.addEventListener('click', ()=>{
  const box = $('#email-add'); const v = (box.value||'').trim(); if(!v) return;
  const d = JSON.parse(localStorage.getItem(stateKey)||'{}'); d._emails = d._emails || []; d._emails.push(v);
  localStorage.setItem(stateKey, JSON.stringify(d)); box.value=''; renderEmailList();
});

/* Footer year */
$('#year').textContent = new Date().getFullYear();

# /manifest.json
{
  "name": "DAWGCHECK Trainer",
  "short_name": "DAWGCHECK",
  "start_url": "./",
  "display": "standalone",
  "orientation": "landscape",
  "background_color": "#f3f5f7",
  "theme_color": "#2b99ca",
  "icons": [
    { "src": "assets/icons/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "assets/icons/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}

# /service-worker.js
const CACHE="dawgtrainer-v9";
self.addEventListener("install",e=>{
  e.waitUntil(caches.open(CACHE).then(c=>c.addAll([
    "./","./index.html","./styles.css","./app.js","./manifest.json",
    "./assets/icons/icon-192.png","./assets/icons/icon-512.png","./assets/city.jpg"
  ])));
  self.skipWaiting();
});
self.addEventListener("activate",e=>{
  e.waitUntil(caches.keys().then(keys=>Promise.all(keys.filter(k=>k!==CACHE).map(k=>caches.delete(k)))));
  self.clients.claim();
});
self.addEventListener("fetch",e=>{
  if(e.request.method!=="GET") return;
  const url = new URL(e.request.url);
  const noQuery = new Request(url.origin+url.pathname, {method:"GET",headers:e.request.headers,mode:e.request.mode,credentials:e.request.credentials,cache:"reload"});
  e.respondWith(
    caches.match(e.request).then(r=>r||
      caches.match(noQuery).then(r2=>r2||
        fetch(e.request).then(net=>{
          caches.open(CACHE).then(cc=>cc.put(noQuery, net.clone()));
          return net;
        })
      )
    )
  );
});