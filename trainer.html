<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MOO Training – Express e-App Simulator</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="style.css" />
  <style>
    /* minimal extras on top of your style.css */
    .screen { display:none; padding:16px 16px 96px; max-width:980px; margin:0 auto; }
    .screen.active { display:block; }
    .bar { background:#f2f5f8; border:1px solid #d7dee6; padding:12px 14px; margin:12px 0; border-radius:6px; }
    .row { display:flex; gap:12px; flex-wrap:wrap; }
    .col { flex:1 1 220px; min-width:220px; }
    label { display:block; font-size:14px; margin:10px 0 6px; }
    input[type="text"], input[type="email"], input[type="tel"], input[type="number"], select, textarea {
      width:100%; padding:10px; border:1px solid #cbd3dd; border-radius:6px; background:#fff;
    }
    textarea { min-height:96px; }
    fieldset { border:1px solid #d7dee6; border-radius:8px; padding:10px 12px; margin:14px 0; }
    fieldset legend { padding:0 6px; font-weight:600; color:#3a4a63; }
    .actions { position:sticky; bottom:0; left:0; right:0; background:#fff; border-top:1px solid #e7edf4; padding:10px; display:flex; gap:8px; justify-content:center; }
    .pill { padding:10px 16px; border-radius:8px; border:1px solid #d7dee6; background:#fff; cursor:pointer; }
    .pill.primary { background:var(--brand,#005BAC); color:#fff; border-color:transparent; }
    .muted { color:#6b7a8f; font-size:13px; }
    .ok { background:#e8f7e8; border:1px solid #bfe6bf; color:#116611; padding:12px; border-radius:6px; margin:10px 0; }
    .warn { background:#fff7e6; border:1px solid #ffe3a3; color:#6a4b00; padding:12px; border-radius:6px; margin:10px 0; }
    .error { color:#b00020; font-weight:600; }
    table.grid { width:100%; border-collapse:collapse; }
    table.grid th, table.grid td { border:1px solid #e1e7ef; padding:8px; font-size:14px; }
    .chip { display:inline-block; padding:6px 10px; border-radius:999px; background:#eef3fa; font-size:12px; margin:0 6px 6px 0; }
    .header { position:sticky; top:0; z-index:10; background:#005BAC; color:#fff; padding:12px 16px; }
    .header h1 { font-size:18px; margin:0; }
    .sub { font-size:12px; opacity:.9; }
    canvas#sigPad { width:100%; max-width:600px; height:180px; border:1px dashed #9fb4d1; background:#fff; border-radius:6px; touch-action: none; }
  </style>
</head>
<body>

<header class="header">
  <h1>Mutual of Omaha – Training Simulator <span class="sub">Express (Term • IUL • Whole Life)</span></h1>
</header>

<!-- 0. Launcher -->
<section class="screen active" id="scr-start">
  <h2>Welcome</h2>
  <p>This is a practice-only clone of the e-App flow. No data leaves your device.</p>
  <div class="bar">
    <div class="row">
      <button class="pill primary" id="btnStartNewCase">Start New Case</button>
      <button class="pill" disabled>View My Cases (disabled in trainer)</button>
    </div>
  </div>
  <div class="actions">
    <button class="pill primary" id="next0">Start</button>
  </div>
</section>

<!-- 1. Case Information -->
<section class="screen" id="scr-case">
  <h2>Case Information</h2>

  <fieldset>
    <legend>Proposed Insured</legend>
    <div class="row">
      <div class="col"><label>First Name<input id="piFirst" type="text"></label></div>
      <div class="col"><label>Middle Initial<input id="piMI" type="text"></label></div>
      <div class="col"><label>Last Name<input id="piLast" type="text"></label></div>
    </div>
    <div class="row">
      <div class="col"><label>Date of Birth (MM/DD/YYYY)<input id="piDOB" type="text" placeholder="MM/DD/YYYY"></label></div>
      <div class="col"><label>Age<input id="piAge" type="number" min="0" inputmode="numeric" placeholder="Auto" readonly></label></div>
      <div class="col">
        <label>Gender
          <select id="piGender">
            <option value="">Please select…</option>
            <option>Male</option><option>Female</option><option>Other</option>
          </select>
        </label>
      </div>
    </div>
  </fieldset>

  <fieldset>
    <legend>Carrier & Product</legend>
    <div class="row">
      <div class="col">
        <label>State
          <select id="piState">
            <option value="">Please select…</option>
            <!-- common states quick list -->
            <option>CA</option><option>FL</option><option>GA</option><option>NC</option><option>PA</option><option>SC</option><option>TX</option><option>Other</option>
          </select>
        </label>
      </div>
      <div class="col">
        <label>Product Type
          <select id="productType">
            <option value="">Please select…</option>
            <option value="term">Term Life (Express)</option>
            <option value="iul">Indexed Universal Life (Express)</option>
            <option value="whole">Whole Life (Express)</option>
          </select>
        </label>
      </div>
      <div class="col" style="align-self:flex-end;">
        <button class="pill" id="btnFindProducts">Find Available Products</button>
      </div>
    </div>
    <div class="muted" id="productNote">Select state and product, then “Find Available Products”.</div>
  </fieldset>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 2. Producer Information (blank for trainees) -->
<section class="screen" id="scr-producer">
  <h2>Producer Information</h2>

  <fieldset>
    <legend>Your Info</legend>
    <div class="row">
      <div class="col"><label>First<input id="prFirst" type="text"></label></div>
      <div class="col"><label>Middle<input id="prMI" type="text"></label></div>
      <div class="col"><label>Last<input id="prLast" type="text"></label></div>
    </div>
    <div class="row">
      <div class="col"><label>Date of Birth<input id="prDOB" type="text" placeholder="MM/DD/YYYY"></label></div>
      <div class="col"><label>Last 4 of SSN<input id="prSSN4" type="text" maxlength="4" inputmode="numeric"></label></div>
      <div class="col"><label>State License Number<input id="prLic" type="text"></label></div>
    </div>
    <div class="row">
      <div class="col"><label>Phone<input id="prPhone" type="tel"></label></div>
      <div class="col"><label>Email<input id="prEmail" type="email"></label></div>
    </div>
    <div class="row">
      <div class="col"><label>Street Address<input id="prAddr" type="text"></label></div>
      <div class="col"><label>City<input id="prCity" type="text"></label></div>
      <div class="col"><label>State<input id="prState" type="text" maxlength="2" placeholder="PA"></label></div>
      <div class="col"><label>Zip<input id="prZip" type="text" maxlength="10"></label></div>
    </div>
    <label>Additional Producer on this contract?
      <span class="chip"><input type="radio" name="prAddl" value="Yes"> Yes</span>
      <span class="chip"><input type="radio" name="prAddl" value="No" checked> No</span>
    </label>
  </fieldset>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 3. Proposed Insured – Details -->
<section class="screen" id="scr-insured">
  <h2>Proposed Insured</h2>

  <fieldset>
    <legend>Identity & Basics</legend>
    <div class="row">
      <div class="col"><label>SSN (last 4 acceptable for training)<input id="piSSN" maxlength="9" inputmode="numeric" type="text"></label></div>
      <div class="col">
        <label>Gender
          <select id="piGender2">
            <option value="">Please select…</option>
            <option>Male</option><option>Female</option><option>Other</option>
          </select>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="col"><label>Height (feet)<input id="piHtFt" type="number" min="3" max="8"></label></div>
      <div class="col"><label>Height (inches)<input id="piHtIn" type="number" min="0" max="11"></label></div>
      <div class="col"><label>Weight (lbs)<input id="piWt" type="number" min="40" max="700"></label></div>
    </div>
  </fieldset>

  <fieldset>
    <legend>Contact</legend>
    <div class="row">
      <div class="col"><label>Street Address<input id="piAddr" type="text"></label></div>
      <div class="col"><label>City<input id="piCity" type="text"></label></div>
      <div class="col"><label>State<input id="piMailState" type="text" maxlength="2"></label></div>
      <div class="col"><label>Zip Code<input id="piZip" type="text"></label></div>
    </div>
    <div class="row">
      <div class="col"><label>Primary Phone<input id="piPhone1" type="tel"></label></div>
      <div class="col"><label>Secondary Phone<input id="piPhone2" type="tel"></label></div>
      <div class="col"><label>Email<input id="piEmail" type="email"></label></div>
    </div>
    <label>US Citizen?
      <span class="chip"><input type="radio" name="citizen" value="Yes"> Yes</span>
      <span class="chip"><input type="radio" name="citizen" value="No"> No</span>
    </label>
    <label>Any tobacco/nicotine in last 12 months?
      <span class="chip"><input type="radio" name="tob" value="Yes"> Yes</span>
      <span class="chip"><input type="radio" name="tob" value="No"> No</span>
    </label>
  </fieldset>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 4. HIPAA (trainer – no real send) -->
<section class="screen" id="scr-hipaa">
  <h2>HIPAA Signature Method</h2>

  <div class="warn">
    Trainer mode: this simulates Present / Not Present selection and PIN; it does not send texts/emails.
  </div>

  <label>Signature Context
    <span class="chip"><input type="radio" name="hipCtx" value="Present"> Present</span>
    <span class="chip"><input type="radio" name="hipCtx" value="Not Present"> Not Present</span>
  </label>

  <label>Notification Method
    <span class="chip"><input type="radio" name="hipNotify" value="Email"> Email</span>
    <span class="chip"><input type="radio" name="hipNotify" value="Text"> Text</span>
  </label>

  <div class="row">
    <div class="col"><label>Cell Phone Number<input id="hipPhone" type="tel"></label></div>
    <div class="col">
      <label>4 Digit PIN
        <div class="row">
          <div class="col"><input id="hipPin" type="text" maxlength="4" inputmode="numeric" placeholder="----"></div>
          <div class="col" style="flex:0 0 auto"><button class="pill" id="genPIN">Generate</button></div>
        </div>
      </label>
    </div>
  </div>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 5. Insured Continued -->
<section class="screen" id="scr-insured2">
  <h2>Proposed Insured (cont.)</h2>
  <fieldset>
    <legend>Driver Information</legend>
    <label>Does the Proposed Insured have a driver's license?
      <span class="chip"><input type="radio" name="hasDL" value="Yes"> Yes</span>
      <span class="chip"><input type="radio" name="hasDL" value="No"> No</span>
    </label>
    <div class="row">
      <div class="col"><label>Driver’s License No.<input id="piDLN" type="text"></label></div>
      <div class="col"><label>DL State<input id="piDLS" type="text" maxlength="2"></label></div>
    </div>
  </fieldset>
  <fieldset>
    <legend>Birth & Ownership</legend>
    <div class="row">
      <div class="col"><label>Birth Country<select id="piBirthCountry"><option>USA</option><option>Other</option></select></label></div>
      <div class="col"><label>State of Birth<input id="piBirthState" type="text" maxlength="2"></label></div>
    </div>
    <label>Will the Proposed Insured be the Owner?
      <span class="chip"><input type="radio" name="ownerSelf" value="Yes"> Yes</span>
      <span class="chip"><input type="radio" name="ownerSelf" value="No"> No</span>
    </label>
  </fieldset>
  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 6. Insurance History (no MOO prefill section) -->
<section class="screen" id="scr-history">
  <h2>Insurance History</h2>

  <label>List all in-force life insurance/annuity contracts for any person proposed for insurance (if none, check “None”).</label>
  <button class="pill" id="btnAddPolicy">Add Policy Row</button>
  <table class="grid" id="tblPolicies">
    <thead><tr><th>Company Name</th><th>Policy Number</th><th>Face Amount</th><th>Actions</th></tr></thead>
    <tbody></tbody>
  </table>
  <label class="chip"><input type="checkbox" id="nonePolicies"> None</label>

  <fieldset>
    <legend>Replacement & Other</legend>
    <div class="row">
      <div class="col">Has the Proposed Insured had, or intend to have, any life insurance policies or annuity contracts replaced, converted, reduced, reissued, sold, subjected to borrowing, or otherwise discontinued because of this application?<br>
        <span class="chip"><input type="radio" name="repl" value="Yes"> Yes</span>
        <span class="chip"><input type="radio" name="repl" value="No"> No</span>
      </div>
    </div>
    <div class="row">
      <div class="col">Declined for life insurance coverage in past 10 years?<br>
        <span class="chip"><input type="radio" name="decl" value="Yes"> Yes</span>
        <span class="chip"><input type="radio" name="decl" value="No"> No</span>
      </div>
      <div class="col">Offered cash/consideration for obtaining this policy?<br>
        <span class="chip"><input type="radio" name="cash" value="Yes"> Yes</span>
        <span class="chip"><input type="radio" name="cash" value="No"> No</span>
      </div>
      <div class="col">Planning to finance premium payments?<br>
        <span class="chip"><input type="radio" name="finance" value="Yes"> Yes</span>
        <span class="chip"><input type="radio" name="finance" value="No"> No</span>
      </div>
      <div class="col">Sell/transfer ownership in next 5 years (or last 5 years)?<br>
        <span class="chip"><input type="radio" name="stol" value="Yes"> Yes</span>
        <span class="chip"><input type="radio" name="stol" value="No"> No</span>
      </div>
    </div>
  </fieldset>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 7. Plan Information -->
<section class="screen" id="scr-plan">
  <h2>Plan Information</h2>

  <div class="bar">
    <div><strong>Maximum coverage allowed (Express):</strong> <span id="maxAllowed">—</span></div>
    <div class="muted">Limits: Term & IUL up to $300,000 • Whole Life up to $50,000</div>
  </div>

  <div class="row">
    <div class="col"><label>Plan (auto)<input id="planName" type="text" readonly placeholder="—"></label></div>
    <div class="col"><label>Amount of Insurance Applied For ($)<input id="faceAmt" type="number" min="1000" step="1000" inputmode="numeric"></label></div>
  </div>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 8. Pre-Approval (always favorable) -->
<section class="screen" id="scr-preapp">
  <h2>Pre-Approval Information</h2>
  <div class="ok"><strong>FAVORABLE</strong></div>
  <p class="muted">This is not a guarantee of coverage; trainer mode always shows a favorable trend.</p>
  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 9. Underwriting Health Questions (placeholder list; will load product-specific set later) -->
<section class="screen" id="scr-uw">
  <h2>Underwriting – Health Assessment</h2>
  <p class="muted">Answer all questions. “Yes” reveals a notes box. (We’ll swap in the exact, product-specific wording later.)</p>

  <div id="uwList"></div>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 10. Beneficiaries -->
<section class="screen" id="scr-bene">
  <h2>Beneficiaries</h2>
  <p>Please enter your <strong>Primary</strong> beneficiaries.</p>
  <button class="pill" id="btnAddPrimary">Add Primary</button>
  <table class="grid" id="tblPrimary">
    <thead><tr><th>Name</th><th>Relationship</th><th>% Share</th><th>Actions</th></tr></thead>
    <tbody></tbody>
  </table>

  <label>Designate a contingent beneficiary?
    <span class="chip"><input type="radio" name="hasCont" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="hasCont" value="No" checked> No</span>
  </label>

  <div id="contWrap" style="display:none; margin-top:10px;">
    <button class="pill" id="btnAddCont">Add Contingent</button>
    <table class="grid" id="tblCont">
      <thead><tr><th>Name</th><th>Relationship</th><th>% Share</th><th>Actions</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 11. Premium Summary (no real rates yet) -->
<section class="screen" id="scr-premium">
  <h2>Premium Summary</h2>

  <fieldset>
    <legend>Summary of Proposed Insured</legend>
    <div id="summaryPI" class="bar">—</div>
  </fieldset>

  <fieldset>
    <legend>Plan Information</legend>
    <div id="summaryPlan" class="bar">—</div>
  </fieldset>

  <button class="pill" id="btnCalcPremium">Calculate Modal Premium</button>
  <div id="premResults" class="bar muted">Rates pending (trainer). Amounts will appear here when rate tables are added.</div>

  <fieldset>
    <legend>Please select the mode of premium payment</legend>
    <label><input type="radio" name="mode" value="Annual"> Direct Bill Annual</label><br>
    <label><input type="radio" name="mode" value="Semi"> Direct Bill Semi-Annual</label><br>
    <label><input type="radio" name="mode" value="Quarterly"> Direct Bill Quarterly</label><br>
    <label><input type="radio" name="mode" value="Monthly"> Monthly Automatic Bill Pay</label>
  </fieldset>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 12. Automatic Bill Pay -->
<section class="screen" id="scr-bill">
  <h2>Automatic Bill Pay</h2>

  <div class="row">
    <div class="col"><label>Who will be the payor?<input id="payorName" type="text" placeholder="(e.g., Proposed Insured)"></label></div>
  </div>

  <fieldset>
    <legend>Account Holder Information</legend>
    <div class="row">
      <div class="col"><label>Name(s) on Account<input id="accName" type="text"></label></div>
      <div class="col"><label>Type of Account<br>
        <label class="chip"><input type="radio" name="acctType" value="Checking"> Checking</label>
        <label class="chip"><input type="radio" name="acctType" value="Savings"> Savings</label>
      </label></div>
    </div>
    <div class="row">
      <div class="col"><label>Financial Institution<input id="bankName" type="text"></label></div>
      <div class="col"><label>Routing Number<input id="routing" type="text" inputmode="numeric" maxlength="9"></label></div>
      <div class="col"><label>Account Number<input id="acctNo" type="text" inputmode="numeric"></label></div>
    </div>
    <fieldset>
      <legend>Ongoing Automatic Monthly Payments</legend>
      <label><input type="radio" name="draftRule" value="day" checked> Choose the calendar day each month</label><br>
      <label><input type="radio" name="draftRule" value="weekday"> Choose week + weekday each month</label>
      <div class="row">
        <div class="col"><label>Select a particular day
          <select id="draftDay">
            <option>1st</option><option>5th</option><option>10th</option><option>15th</option><option>20th</option><option>25th</option>
          </select></label>
        </div>
      </div>
      <p class="muted">If the scheduled date is a weekend/holiday, draft occurs next business day.</p>
    </fieldset>

    <div class="row">
      <div class="col"><label>Amount Quoted ($)<input id="amountQuoted" type="text" placeholder="From premium summary"></label></div>
      <div class="col"><label>Initial Premium
        <select id="initialPrem">
          <option>Draft immediately upon approval/issue</option>
          <option>Draft with first monthly cycle</option>
        </select></label>
      </div>
    </div>
  </fieldset>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 13. Validate & Lock -->
<section class="screen" id="scr-lock">
  <h2>Validate and Lock Data</h2>
  <div class="ok">The application has been locked (trainer).</div>
  <p class="muted">In production this protects client data during signature. Here it simply advances the flow.</p>
  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 14. Signature Method (client) -->
<section class="screen" id="scr-sigmethod">
  <h2>Signature Method</h2>
  <label><input type="radio" name="sigMethod" value="electronic" checked> Collect all client signatures electronically</label><br>
  <label><input type="radio" name="sigMethod" value="wet"> Print application for client wet signature</label>

  <fieldset>
    <legend>Signer Details</legend>
    <label>Present or Not Present?
      <span class="chip"><input type="radio" name="sigCtx" value="Present"> Present</span>
      <span class="chip"><input type="radio" name="sigCtx" value="Not Present"> Not Present</span>
    </label>
    <label>Notification Method
      <span class="chip"><input type="radio" name="sigNotify" value="Email"> Email</span>
      <span class="chip"><input type="radio" name="sigNotify" value="Text"> Text</span>
    </label>
    <div class="row">
      <div class="col"><label>Cell Phone Number<input id="sigPhone" type="tel"></label></div>
      <div class="col"><label>4 Digit PIN<input id="sigPin" type="text" maxlength="4" inputmode="numeric"></label></div>
    </div>
    <div class="row">
      <div class="col"><label>Signed at City<input id="sigCity" type="text"></label></div>
      <div class="col"><label>Signed at State<input id="sigState" type="text" maxlength="2"></label></div>
    </div>
  </fieldset>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 15. Producer Statement -->
<section class="screen" id="scr-prodstmt">
  <h2>Producer Statement</h2>

  <label>Pending or existing life insurance/annuity with any company?
    <span class="chip"><input type="radio" name="ps1" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="ps1" value="No"> No</span>
  </label>
  <label>Give names of the person(s):<textarea id="psNames" placeholder=""></textarea></label>

  <label>Any reason to believe this policy replaces any existing policy?
    <span class="chip"><input type="radio" name="ps2" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="ps2" value="No"> No</span>
  </label>

  <label>Did you provide MIB Pre-Notice, Notice of Info Practices, and Buyer’s Guide?
    <span class="chip"><input type="radio" name="ps3" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="ps3" value="No"> No</span>
  </label>

  <label>Interview conducted in person?
    <span class="chip"><input type="radio" name="ps4" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="ps4" value="No"> No</span>
  </label>
  <label>Please explain<textarea id="psExplain" placeholder=""></textarea></label>

  <label>Previous residences (past 5 years)</label>
  <button class="pill" id="btnAddAddr">Add Address</button>
  <table class="grid" id="tblPrevAddr">
    <thead><tr><th>Street</th><th>City</th><th>State</th><th>Zip</th><th>From</th><th>To</th><th>Actions</th></tr></thead>
    <tbody></tbody>
  </table>

  <label>How long have you known the Proposed Insured?
    <select id="knownHowLong">
      <option value="">Select…</option>
      <option>Recently met</option><option>6–12 months</option><option>1–3 years</option><option>3+ years</option>
    </select>
  </label>

  <label>Are you the Proposed Insured or Owner?
    <span class="chip"><input type="radio" name="ps5" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="ps5" value="No"> No</span>
  </label>

  <label>Related to the Proposed Insured or Owner?
    <span class="chip"><input type="radio" name="ps6" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="ps6" value="No"> No</span>
  </label>

  <label>Any other info that may affect issuance?
    <span class="chip"><input type="radio" name="ps7" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="ps7" value="No"> No</span>
  </label>

  <label>Has the Proposed Insured financed/refinanced a home in last 2 years?
    <span class="chip"><input type="radio" name="ps8" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="ps8" value="No"> No</span>
  </label>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 16. Producer eSignature -->
<section class="screen" id="scr-prodsign">
  <h2>Apply eSignature – Producer</h2>

  <div class="warn">Trainer signature pad. Toggle “Sign with finger?” then sign below.</div>

  <div class="row">
    <div class="col"><label>Signed at City<input id="prodCity" type="text"></label></div>
    <div class="col"><label>Signed at State<input id="prodState" type="text" maxlength="2"></label></div>
  </div>

  <label>Would you like to sign with your finger?
    <span class="chip"><input type="radio" name="prodFinger" value="Yes"> Yes</span>
    <span class="chip"><input type="radio" name="prodFinger" value="No" checked> No</span>
  </label>

  <div id="sigWrap" style="display:none;">
    <canvas id="sigPad"></canvas><br>
    <button class="pill" id="clearSig">Clear</button>
  </div>

  <div class="row" style="margin-top:10px;">
    <button class="pill" id="applySig">Apply eSignature</button>
    <button class="pill" disabled>Print Signed Application</button>
    <button class="pill" id="submitApp">Submit to United of Omaha</button>
  </div>

  <div id="submitMsg" class="ok" style="display:none; margin-top:10px;"></div>

  <div class="actions">
    <button class="pill" data-prev>Back</button>
    <button class="pill primary" data-next>Next</button>
  </div>
</section>

<!-- 17. Submission -->
<section class="screen" id="scr-submit">
  <h2>Submission Complete</h2>
  <div class="ok">
    <div><strong>Thank you for submitting your Electronic Application!</strong></div>
    <div id="policyNum" style="margin-top:6px;">Policy Number: —</div>
  </div>
  <div class="ok">The application has been referred to United of Omaha Underwriting for further review. (Trainer message)</div>
  <div class="row" style="margin-top:14px;">
    <button class="pill" id="resetAll">Start Over</button>
  </div>
</section>

<script>
/* --- basic nav --- */
const screens = [...document.querySelectorAll('.screen')];
let step = 0;
function show(i){ screens.forEach((s,idx)=>s.classList.toggle('active', idx===i)); step=i; window.scrollTo({top:0, behavior:'instant'}); }
document.querySelectorAll('[data-next]').forEach(b=>b.addEventListener('click', ()=>{ if(validateStep(step)) show(step+1); }));
document.querySelectorAll('[data-prev]').forEach(b=>b.addEventListener('click', ()=> show(Math.max(0,step-1))));
document.getElementById('next0').onclick = ()=> show(1);
document.getElementById('btnStartNewCase').onclick = ()=> show(1);

/* age auto from DOB */
function calcAge(dobStr){
  const m = /^(\d{2})\/(\d{2})\/(\d{4})$/.exec(dobStr||''); if(!m) return '';
  const d=new Date(+m[3], +m[1]-1, +m[2]); if(isNaN(d)) return '';
  const t=new Date(); let a=t.getFullYear()-d.getFullYear();
  const before = (t.getMonth()<d.getMonth()) || (t.getMonth()==d.getMonth() && t.getDate()<d.getDate());
  return before ? a-1 : a;
}
const piDOB = document.getElementById('piDOB');
piDOB.addEventListener('input', ()=> document.getElementById('piAge').value = calcAge(piDOB.value));

/* product + limits */
const productType = document.getElementById('productType');
const productNote = document.getElementById('productNote');
const maxAllowedEl = document.getElementById('maxAllowed');
const planName = document.getElementById('planName');
const LIMITS = { term:300000, iul:300000, whole:50000 };
document.getElementById('btnFindProducts').onclick = ()=>{
  const p = productType.value;
  if(!p){ productNote.textContent = 'Select a product type first.'; return; }
  const names = { term:'Term Life Express', iul:'Indexed Universal Life Express', whole:'Whole Life Express' };
  planName.value = names[p];
  maxAllowedEl.textContent = '$' + LIMITS[p].toLocaleString();
  productNote.textContent = names[p] + ' available in trainer. Proceed.';
};

/* HIPAA PIN */
document.getElementById('genPIN').onclick = ()=> document.getElementById('hipPin').value = ('' + Math.floor(1000+Math.random()*9000));

/* dynamic tables */
function row(inputs, removeCb){
  const tr=document.createElement('tr');
  inputs.forEach(el=>{ const td=document.createElement('td'); td.appendChild(el); tr.appendChild(td); });
  const td=document.createElement('td'); const rm=document.createElement('button'); rm.className='pill'; rm.textContent='Delete'; rm.onclick=()=>{ tr.remove(); }; td.appendChild(rm); tr.appendChild(td);
  return tr;
}
const tblPoliciesBody = document.querySelector('#tblPolicies tbody');
document.getElementById('btnAddPolicy').onclick = ()=>{
  const c=document.createElement('input'); c.type='text';
  const n=document.createElement('input'); n.type='text';
  const f=document.createElement('input'); f.type='number'; f.min=0; f.step='1000';
  tblPoliciesBody.appendChild(row([c,n,f]));
};

/* Beneficiaries */
const tblPrimaryBody = document.querySelector('#tblPrimary tbody');
document.getElementById('btnAddPrimary').onclick = ()=> addBene(tblPrimaryBody);
const tblContBody = document.querySelector('#tblCont tbody');
document.getElementById('btnAddCont').onclick = ()=> addBene(tblContBody);
function addBene(tbody){
  const name=document.createElement('input'); name.type='text';
  const rel=document.createElement('input'); rel.type='text';
  const pct=document.createElement('input'); pct.type='number'; pct.min=0; pct.max=100;
  tbody.appendChild(row([name,rel,pct]));
}
document.querySelectorAll('input[name="hasCont"]').forEach(r=>r.addEventListener('change', e=>{
  document.getElementById('contWrap').style.display = (e.target.value==='Yes') ? 'block' : 'none';
}));

/* Premium summary – pull in PI + plan */
const summaryPI = document.getElementById('summaryPI');
const summaryPlan = document.getElementById('summaryPlan');
document.getElementById('btnCalcPremium').onclick = ()=>{
  // placeholder until rate tables provided
  const msg = `
    <div><strong>Annual:</strong> —</div>
    <div><strong>Semi-Annual:</strong> —</div>
    <div><strong>Quarterly:</strong> —</div>
    <div><strong>Monthly (Auto Bill Pay):</strong> —</div>
    <div class="muted">Rates coming soon. Select a mode to continue training.</div>
  `;
  document.getElementById('premResults').innerHTML = msg;
};

/* Producer prev addresses */
const prevAddrBody = document.querySelector('#tblPrevAddr tbody');
document.getElementById('btnAddAddr').onclick = ()=>{
  const a=document.createElement('input'); a.type='text';
  const c=document.createElement('input'); c.type='text';
  const s=document.createElement('input'); s.type='text'; s.maxLength=2;
  const z=document.createElement('input'); z.type='text';
  const f=document.createElement('input'); f.type='text'; f.placeholder='MM/YYYY';
  const t=document.createElement('input'); t.type='text'; t.placeholder='MM/YYYY';
  prevAddrBody.appendChild(row([a,c,s,z,f,t]));
};

/* UW questions – placeholder set; will swap with exact product-specific later */
const UW_QUESTIONS = [
  'In the past 5 years, any diagnosis or treatment for cancer, heart attack, stroke, or COPD?',
  'Currently admitted to a hospital, hospice, or nursing facility?',
  'Ever been advised to have a test, treatment, or surgery which has not been completed?',
  'Use of oxygen equipment (excluding CPAP) or dialysis?',
  'In the past 12 months, any DUI or felony conviction?',
  'Any pending surgery or medical testing not yet reviewed by a physician?',
  'In the past 2 years, used marijuana or any illicit drug other than as prescribed?',
  'In the past 2 years, been declined or rated for life insurance?'
];
const uwList = document.getElementById('uwList');
UW_QUESTIONS.forEach((q,idx)=>{
  const fs=document.createElement('fieldset');
  const lg=document.createElement('legend'); lg.textContent = `Q${idx+1}`;
  const p=document.createElement('p'); p.textContent=q;
  const yes=document.createElement('input'); yes.type='radio'; yes.name='uw'+idx; yes.value='Yes';
  const no=document.createElement('input'); no.type='radio'; no.name='uw'+idx; no.value='No';
  const notes=document.createElement('textarea'); notes.placeholder='If Yes, add notes (trainer)'; notes.style.display='none';
  yes.addEventListener('change',()=>notes.style.display='block');
  no.addEventListener('change',()=>notes.style.display='none');
  fs.appendChild(lg); fs.appendChild(p);
  fs.appendChild(makeChip(yes,'Yes ')); fs.appendChild(makeChip(no,'No '));
  fs.appendChild(notes);
  uwList.appendChild(fs);
});
function makeChip(input, labelTxt){
  const w=document.createElement('label'); w.className='chip';
  w.appendChild(input); w.appendChild(document.createTextNode(labelTxt));
  return w;
}

/* Producer e-signature simple pad */
const sigPad = document.getElementById('sigPad');
let drawing=false, signed=false, ctx=null;
function initPad(){
  const ratio = window.devicePixelRatio || 1;
  sigPad.width = sigPad.clientWidth * ratio;
  sigPad.height = sigPad.clientHeight * ratio;
  ctx = sigPad.getContext('2d');
  ctx.scale(ratio, ratio);
  ctx.lineWidth = 2; ctx.lineCap='round';
}
function pos(e){ const r=sigPad.getBoundingClientRect(); const x=(e.touches?e.touches[0].clientX:e.clientX)-r.left; const y=(e.touches?e.touches[0].clientY:e.clientY)-r.top; return {x,y}; }
function start(e){ drawing=true; const {x,y}=pos(e); ctx.beginPath(); ctx.moveTo(x,y); e.preventDefault(); }
function move(e){ if(!drawing) return; const {x,y}=pos(e); ctx.lineTo(x,y); ctx.stroke(); signed=true; e.preventDefault(); }
function end(){ drawing=false; }
document.querySelectorAll('input[name="prodFinger"]').forEach(r=>r.addEventListener('change', e=>{
  document.getElementById('sigWrap').style.display = (e.target.value==='Yes') ? 'block':'none';
  if(e.target.value==='Yes'){ initPad(); }
}));
if(sigPad){
  sigPad.addEventListener('mousedown',start); sigPad.addEventListener('mousemove',move); window.addEventListener('mouseup',end);
  sigPad.addEventListener('touchstart',start,{passive:false}); sigPad.addEventListener('touchmove',move,{passive:false}); sigPad.addEventListener('touchend',end);
}
document.getElementById('clearSig').onclick = ()=>{ initPad(); signed=false; };

/* Apply / Submit */
document.getElementById('applySig').onclick = ()=> alert('Signature captured (trainer).');
document.getElementById('submitApp').onclick = ()=>{
  const out = document.getElementById('submitMsg');
  out.style.display='block';
  out.innerHTML = 'Application submitted (trainer).';
  document.getElementById('policyNum').textContent = 'Policy Number: BU' + Math.floor(100000 + Math.random()*900000);
};

/* Reset */
document.getElementById('resetAll').onclick = ()=>{ location.reload(); };

/* Step validation (lightweight) */
function requireVal(id){ const el=document.getElementById(id); if(!el) return true; if(!el.value){ el.scrollIntoView({behavior:'smooth', block:'center'}); el.focus(); flash(el); return false; } return true; }
function flash(el){ const o=el.style.outline; el.style.outline='2px solid #ff6b6b'; setTimeout(()=>el.style.outline=o, 1200); }

function validateStep(i){
  switch(i){
    case 1: // case info basics
      if(!requireVal('piFirst')||!requireVal('piLast')||!requireVal('piDOB')||!requireVal('piGender')||!requireVal('piState')||!requireVal('productType')) return false;
      return true;
    case 6: // plan info
      const p = productType.value; const lim = LIMITS[p]; const fa = +document.getElementById('faceAmt').value || 0;
      if(!fa){ alert('Enter face amount.'); return false; }
      if(fa>lim){ alert('Face amount exceeds Express limit for this product.'); return false; }
      return true;
    default: return true;
  }
}

/* fill summaries before premium screen */
const observer = new MutationObserver(()=>{
  if(screens[11].classList.contains('active')){ // premium screen index
    const name = `${val('piFirst')} ${val('piLast')}`.trim();
    summaryPI.innerHTML = `
      <div><strong>Name:</strong> ${name||'—'}</div>
      <div><strong>DOB:</strong> ${val('piDOB')||'—'} (Age ${val('piAge')||'—'})</div>
      <div><strong>Gender:</strong> ${val('piGender')||val('piGender2')||'—'}</div>
      <div><strong>Address:</strong> ${val('piAddr')||'—'}, ${val('piCity')||''} ${val('piMailState')||''} ${val('piZip')||''}</div>
    `;
    summaryPlan.innerHTML = `
      <div><strong>Plan:</strong> ${val('planName')||'—'}</div>
      <div><strong>Face Amount:</strong> $${(+val('faceAmt')||0).toLocaleString()}</div>
      <div><strong>Tobacco Status:</strong> ${checked('tob')||'—'}</div>
    `;
  }
});
observer.observe(document.body, { attributes:true, subtree:true, attributeFilter:['class'] });

function val(id){ const el=document.getElementById(id); return el?el.value:''; }
function checked(name){ const el=document.querySelector(`input[name="${name}"]:checked`); return el?el.value:''; }

/* sync gender dropdowns */
document.getElementById('piGender').addEventListener('change', e=>{
  document.getElementById('piGender2').value = e.target.value;
});
</script>
</body>
</html>
